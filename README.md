# Black Stories AI

A Python application where two AI models play the Black Stories game in a formal police interrogation setting.

## Description

This project implements a Black Stories game where an AI Narrator presents a mysterious situation, and an AI Detective asks questions to uncover the hidden solution. The game features different difficulty levels, automatic story generation, and a minimalist command-line interface.

## Web Interface

A web-based interface for the Black Stories AI game is now available. This interface allows users to interact with the AI Narrator and Detective through a browser, providing a more accessible and user-friendly experience. The web application is built with Flask and uses JavaScript for front-end interactions.

## Features

- **AI Roles**: Narrator (answers "yes", "no", "not relevant") and Detective (asks questions, solves the mystery).
- **Difficulty Levels**: Easy, Medium, Hard, affecting story complexity and solution validation.
- **Automatic Story Generation**: Stories are generated by the Narrator AI before the game starts.
- **Minimalist UI**: Clean display of questions and answers, user presses ENTER to continue.
- **Web UI**: A browser-based interface for interactive gameplay.
- **Error Handling**: Robust connection error handling with user retry options.
- **Configurable AI Models**: Supports Gemini and Ollama models via CLI arguments and environment variables.

## Installation

1.  **Clone the repository**:
    ```bash
    git clone https://github.com/your-username/black-stories-ai.git
    cd black-stories-ai
    ```

2.  **Install `uv`**:
    If you don't have `uv` installed, you can install it using pip:
    ```bash
    pip install uv
    ```

3.  **Install dependencies**:
    ```bash
    uv sync
    ```

## Configuration

### API Keys and Environment Variables

Create a `.env` file in the root directory of the project based on `.env.example`.

```ini
# .env
# API Keys
GEMINI_API_KEY=your_gemini_api_key_here

# Ollama Configuration (if used)
OLLAMA_API_URL=http://localhost:11434
```

**Note**: The `.env` file is ignored by Git and should not be committed to version control.

### Command-Line Arguments

The game can be configured using command-line arguments:

```bash
python main.py -narrador provider:modelo -detective provider:modelo -dificultad nivel
```

-   `-narrador`: Specifies the provider and model for the Narrator AI (e.g., `gemini:gemini-2.0-flash`).
-   `-detective`: Specifies the provider and model for the Detective AI (e.g., `ollama:llama2`).
-   `-dificultad`: Sets the difficulty level (`facil`, `media`, `dificil`).

**Default Values**:
-   `narrador`: `gemini:gemini-2.0-flash`
-   `detective`: `gemini:gemini-2.0-flash`
-   `dificultad`: `media`

## Usage Examples

### Command-Line Interface

```bash
# Basic usage (uses default values)
uv run main.py

# Specify Narrator and Detective models
uv run main.py -narrador gemini:gemini-2.0-flash -detective ollama:llama2

# Hard game with different models
uv run main.py -narrador gemini:gemini-pro -detective gemini:gemini-2.0-flash -dificultad dificil

# Only change difficulty (uses default models)
uv run main.py -dificultad facil
```

### Web Interface

To start the web application, navigate to the project root and run:

```bash
uv run .\web\app.py
```

Then, open your browser and go to `http://127.0.0.1:5000` (or the address shown in your console).

## System Requirements

-   Python 3.10 or higher
-   `uv` package manager
-   Access to Gemini API (with `GEMINI_API_KEY`) or a local Ollama server (with `OLLAMA_API_URL` configured)
